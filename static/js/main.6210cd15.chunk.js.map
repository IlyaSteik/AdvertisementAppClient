{"version":3,"sources":["js/utils.js","apps/AdvertisementApp.js","index.js"],"names":["get","url","params","a","query","Object","keys","map","value","encodeURIComponent","join","url_","Promise","res","rej","fetch","method","then","json","answer","catch","err","error","code","text","toString","getUrlParams","window","location","search","length","JSON","parse","decodeURI","substring","replace","openUrl","element","document","createElement","href","target","click","remove","apiUrl","AdvertisementApp","props","state","activeStory","storyHistory","apps","accounts","groups","stats","advert_messages","advert_group","our_advert","site_content","modalHistory","modalInfo","advert_messages_params","advert_group_params","selectedAppIdForWall","data_apps","data_accounts","data_groups","data_stats","data_advert_messages","data_advert_group","data_our_advert","data_site_content","componentDidMount","bind","canGoBack","back","popout","setState","history","pushState","pop","currentHistory","snackbar","bridge","send","status","go","panel","push","activePanel","onStoryChange","e","currentTarget","dataset","story","onInputChange","name","modalBack","setActiveModal","activeModal","addEventListener","preventDefault","subscribe","detail","type","data","undefined","console","log","schemeAttribute","createAttribute","scheme","body","attributes","setNamedItem","evt","tgt","event","srcElement","files","FileReader","resolve","file","fr","onload","includes","image","Image","src","result","canvas","createCanvas","width","height","getContext","drawImage","request","form","toDataURL","response","statusCode","readAsDataURL","this","advert_messages_groups","advert_group_groups","uploadedFile","tabs","caption","icon","id","panels","left","onClick","size","before","admin_id","app_id","app_name","group_message","group_subscribe","app_url","app_sign","index","key","style","marginTop","mode","top","contentEditable","after","login","password","display","stretched","marginLeft","modal","onClose","header","right","getRef","ref","inputAppUrlRef","defaultValue","inputAppGroupMessagesRef","inputAppGroupSubscribeRef","inputAppIdRef","inputAppAdminRef","inputAppSignRef","access_token","inputLoginRef","inputPasswordRef","inputTokenRef","group_id","title","photo_url","marginRight","inputGroupNameRef","inputGroupPhotoUrlRef","inputGroupTokenRef","inputGroupAdminIdRef","users","users_today","story_shares","allowed_message","subscribed_group","refs","margin","level","weight","className","value1","alignItems","sort","b","reverse","padding","ChipsSelect","showSelected","closeAfterSelect","onChange","options","label","renderOption","option","otherProps","filter","findIndex","creatable","owner_id","views","likes","comments","reposts","price","color","inputWallUrlRef","placeholder","inputWallPriceRef","inputWallAppIdRef","description","splice","inputStickerTitleRef","inputStickerDescriptionRef","replaceAll","inputStickerUrlRef","id_","inputStickerIdRef","sticker","accept","multiple","uploadStickerImageRef","uploadFile","to_check","edited_keys","data-key","Application","withAdaptivity","isDesktop","viewWidth","ViewWidth","SMALL_TABLET","styleForSelectedCell","backgroundColor","borderRadius","justifyContent","fixed","maxWidth","disabled","data-story","animate","spaced","tabbar","selected","React","Component","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.6210cd15.chunk.js","sourcesContent":["import {default as bridge} from '@vkontakte/vk-bridge';\r\n\r\nexport function convertTextToLines(text, font, max_width) {\r\n    const\r\n        {createCanvas} = require('canvas'),\r\n        canvas = createCanvas(1080, 1920),\r\n        ctx = canvas.getContext('2d')\r\n    ;\r\n    ctx.font = font;\r\n    let width = 0, lines = [], result, i, j;\r\n\r\n    while (text.length) {\r\n        for (i = text.length; ctx.measureText(text.substr(0, i)).width > max_width; i--) ;\r\n        result = text.substr(0, i);\r\n\r\n        if (i !== text.length)\r\n\r\n            for (j = 0; result.indexOf(' ', j) !== -1; j = result.indexOf(' ', j) + 1) ;\r\n        lines.push(result.substr(0, j || result.length));\r\n\r\n        width = Math.max(width, ctx.measureText(lines[lines.length - 1]).width);\r\n        text = text.substr(lines[lines.length - 1].length, text.length);\r\n    }\r\n\r\n    return lines;\r\n}\r\n\r\nexport async function get(url, params) {\r\n    const\r\n        query = params ? '?' + Object.keys(params).map((value) =>\r\n            encodeURIComponent(value) + '=' + encodeURIComponent(params[value])\r\n        ).join('&') : '',\r\n        url_ = `${url}${query}`;\r\n    return await new Promise((res, rej) => {\r\n        fetch(url_, {method: 'GET'})\r\n            .then(res =>\r\n                res.json()\r\n            )\r\n            .then(answer =>\r\n                res(answer)\r\n            ).catch(err =>\r\n            res({error: {code: -1, text: err.toString()}})\r\n        );\r\n    });\r\n}\r\n\r\nexport const defaultFonts = [\r\n    'SF Pro Text',\r\n    'SF Pro Text Heavy',\r\n    'SF Pro Text Semibold',\r\n    'SF Pro Display',\r\n    'SF Pro Display Bold',\r\n    'SF Pro Display Semibold',\r\n    'SF Pro Display Medium',\r\n    'SF Pro Rounded',\r\n    'SF Pro Rounded Semibold',\r\n    'SF Pro Rounded Bold',\r\n    'SF UI Display',\r\n    'SF UI Text',\r\n    'TT Commons',\r\n    'TT Commons Bold',\r\n    'Manrope ExtraBold'\r\n];\r\n\r\nexport function loadFonts(fonts = defaultFonts) {\r\n    for (const font of fonts) {\r\n        const span = document.createElement('span');\r\n        span.style.fontFamily = font;\r\n        span.innerText = '.';\r\n        document.body.appendChild(span);\r\n        setTimeout(() => span.remove(), 1);\r\n    }\r\n}\r\n\r\nexport function animateValue(obj, start, end, duration) {\r\n    if (start === end || end - start === 1) {\r\n        obj.innerHTML = end;\r\n    } else {\r\n        let startTimestamp = null;\r\n        const step = (timestamp) => {\r\n            if (!startTimestamp) startTimestamp = timestamp;\r\n            const progress = Math.min((timestamp - startTimestamp) / duration, 1);\r\n            obj.innerHTML = Math.floor(progress * (end - start) + start);\r\n            if (progress < 1) {\r\n                window.requestAnimationFrame(step);\r\n            }\r\n        };\r\n        window.requestAnimationFrame(step);\r\n    }\r\n}\r\n\r\nexport function cps(array) {\r\n    if (array.length !== 0) {\r\n        let\r\n            first_date = array[0],\r\n            cur_pos = 0,\r\n            clicks_per_second = []\r\n        ;\r\n        array = array.map(value => value - first_date);\r\n\r\n        for (const click of array) {\r\n            cur_pos = click < 1000 ? 0 : parseInt((click + '').substring(0, (click + '').length - 3));\r\n            clicks_per_second[cur_pos] = clicks_per_second[cur_pos] > 0 ? clicks_per_second[cur_pos] + 1 : 1;\r\n        }\r\n\r\n        clicks_per_second = clicks_per_second.filter(value => value > 0);\r\n\r\n        const\r\n            max_cps = Math.max(...clicks_per_second),\r\n            min_cps = Math.min(...clicks_per_second),\r\n            mid_cps = Math.ceil((max_cps + min_cps) / 2)\r\n        ;\r\n        return {max_cps, min_cps, mid_cps};\r\n    } else {\r\n        return {max_cps: 0, min_cps: 0, mid_cps: 0};\r\n    }\r\n}\r\n\r\nfunction componentToHex(c) {\r\n    const hex = c.toString(16);\r\n    return hex.length == 1 ? '0' + hex : hex;\r\n}\r\n\r\nexport function rgbToHex(r, g, b) {\r\n    return '#' + componentToHex(r) + componentToHex(g) + componentToHex(b);\r\n}\r\n\r\nexport function sleep(ms) {\r\n    return new Promise(resolve => setTimeout(resolve, ms));\r\n}\r\n\r\nexport function decOfNum(number, titles, needNumber = true) {\r\n    if (number !== undefined) {\r\n        let decCache = [],\r\n            decCases = [2, 0, 1, 1, 1, 2];\r\n        if (!decCache[number]) decCache[number] = number % 100 > 4 && number % 100 < 20 ? 2 : decCases[Math.min(number % 10, 5)];\r\n        return (needNumber ? number + ' ' : '') + titles[decCache[number]];\r\n    }\r\n}\r\n\r\nexport function numToStr(number) {\r\n    if (number > 0 && number <= 10) {\r\n        const words = [\r\n            'первое', 'второе', 'третье', 'четвертое', 'пятое', 'шестое', 'седьмое', 'восьмое', 'девятое', 'десятое'\r\n        ];\r\n        return words[number - 1];\r\n    } else {\r\n        return number + '';\r\n    }\r\n}\r\n\r\nexport function shortIntegers(int) {\r\n    try {\r\n        return int.toString().replace(/(\\d)(?=(\\d\\d\\d)+([^\\d]|$))/g, '$1 ');\r\n    } catch (e) {\r\n        return 0;\r\n    }\r\n}\r\n\r\nexport function getRandomInt(min, max) {\r\n    return Math.floor(Math.random() * (max - min + 1)) + min;\r\n}\r\n\r\nexport function getRandomInts(min, max, count) {\r\n    const array = [];\r\n    for (let i = 0; i < count; i++) {\r\n        const int = getRandomInt(min, max);\r\n        if (array.indexOf(int) === -1) {\r\n            array.push(int);\r\n        } else {\r\n            if (max >= count)\r\n                i--;\r\n            else\r\n                array.push(int);\r\n        }\r\n    }\r\n    return array;\r\n}\r\n\r\nexport function nodeToString(node) {\r\n    let tmpNode = document.createElement(\"div\");\r\n    tmpNode.appendChild(node.cloneNode(true));\r\n    let str = tmpNode.innerHTML;\r\n    tmpNode = node = null;\r\n    return str;\r\n}\r\n\r\nexport function convertMiliseconds(miliseconds) {\r\n    let hours, minutes, total_hours, total_minutes, total_seconds;\r\n\r\n    total_seconds = parseInt(Math.floor(miliseconds / 1000));\r\n    total_minutes = parseInt(Math.floor(total_seconds / 60));\r\n    total_hours = parseInt(Math.floor(total_minutes / 60));\r\n\r\n    minutes = parseInt(total_minutes % 60);\r\n    hours = parseInt(total_hours % 24);\r\n\r\n    return hours + 'ч. ' + minutes + 'мин.';\r\n}\r\n\r\nexport function convertMsToNormalTime(miliseconds) {\r\n    let hours, minutes, seconds, total_hours, total_minutes, total_seconds;\r\n\r\n    total_seconds = parseInt(Math.floor(miliseconds / 1000));\r\n    total_minutes = parseInt(Math.floor(total_seconds / 60));\r\n    total_hours = parseInt(Math.floor(total_minutes / 60));\r\n\r\n    seconds = parseInt(total_seconds % 60);\r\n    minutes = parseInt(total_minutes % 60);\r\n    hours = parseInt(total_hours % 24);\r\n\r\n    return {hours, minutes, seconds};\r\n}\r\n\r\nconst getImage = (src) =>\r\n    new Promise((res, rej) => {\r\n        const image = new Image();\r\n\r\n        image.onload = () => res(image);\r\n        image.crossOrigin = 'anonymous';\r\n        image.onstalled = (e) => {\r\n            console.log('Failed to fetch data, but trying.', e);\r\n            rej(e);\r\n        };\r\n        image.onerror = (e) => {\r\n            console.log('Failed to fetch data, error.', e);\r\n            rej(e);\r\n        };\r\n        image.src = src;\r\n    });\r\n\r\nexport async function toBlob(object, dataUrl = true) {\r\n    const\r\n        myCanvas = document.createElement('canvas'),\r\n        ctxt = myCanvas.getContext('2d');\r\n\r\n    let base = typeof object === 'string' ? object : window.btoa(object);\r\n    const img = await getImage(typeof object === 'string' ? base : `data:image/svg+xml;base64,${base}`);\r\n    myCanvas.height = img.height;\r\n    myCanvas.width = img.width;\r\n    if (ctxt === null) {\r\n        return \"\";\r\n    }\r\n    ctxt.drawImage(img, 0, 0, img.width, img.height);\r\n    return dataUrl ? myCanvas.toDataURL() : myCanvas;\r\n}\r\n\r\nexport function getUrlParams() {\r\n    return window.location.search.length > 0 && JSON.parse('{\"' + decodeURI(window.location.search.substring(1)).replace(/\"/g, '\\\\\"').replace(/&/g, '\",\"').replace(/=/g, '\":\"') + '\"}');\r\n}\r\n\r\nexport const platforms = {\r\n    desktop_web: /desktop_web/g,\r\n    mobile_android: /mobile_android/g,\r\n    mobile_android_messenger: /mobile_android_messenger/g,\r\n    mobile_ipad: /mobile_ipad/g,\r\n    mobile_iphone: /mobile_iphone/g,\r\n    mobile_iphone_messenger: /mobile_iphone_messenger/g,\r\n    mobile_web: /mobile_web/g,\r\n\r\n    android: /mobile_android|mobile_android_messenger/g,\r\n    ios: /mobile_ipad|mobile_iphone|mobile_iphone_messenger/g\r\n};\r\n\r\nexport function isPlatformIOS() {\r\n    return getUrlParams().vk_platform === 'mobile_iphone';\r\n}\r\n\r\nexport function isPlatformAndroid() {\r\n    return platforms.android.test(getUrlParams().vk_platform);\r\n}\r\n\r\nexport function isPlatformDesktop() {\r\n    return getUrlParams().vk_platform === 'desktop_web';\r\n}\r\n\r\nexport let vk_local_users = {},\r\n    name_cases = ['first_name', 'last_name', 'first_name_dat', 'first_name_nom', 'first_name_gen', 'first_name_acc', 'first_name_ins', 'first_name_abl', 'last_name_dat', 'last_name_nom', 'last_name_gen', 'last_name_acc', 'last_name_ins', 'last_name_abl'];\r\n\r\nexport async function getVKUsers(ids) {\r\n    const\r\n        user_ids = [\r\n            ...new Set(\r\n                ids\r\n                    .filter(value => vk_local_users[value] === undefined)\r\n                    .map(\r\n                        value => typeof value === 'number' ? value : value.replace('@', '')\r\n                            .replace('id', '')\r\n                            .replace('vk.com/', '')\r\n                            .replace('http://', '')\r\n                            .replace('https://', '')\r\n                    )\r\n            )\r\n        ],\r\n        i = Math.floor(user_ids.length / 100)\r\n    ;\r\n\r\n    if (user_ids.length > 0) {\r\n        let users = [];\r\n\r\n        for (let j = 0; j < i + 1; j++) {\r\n            users = users.concat(\r\n                await vkApiRequest('users.get', {\r\n                    user_ids: user_ids.slice(j * 100, j * 100 + 100).join(','),\r\n                    fields: ['screen_name', 'photo_100', 'photo_200', ...name_cases].join(',')\r\n                })\r\n            );\r\n        }\r\n\r\n        for (const user of users) {\r\n            vk_local_users[user.id] = user;\r\n        }\r\n    }\r\n\r\n    return ids.map(value => vk_local_users[value] || vk_local_users[Object.keys(vk_local_users).find(key => vk_local_users[key].screen_name === value)]);\r\n}\r\n\r\nexport async function vkApiRequest(method, params = {}) {\r\n    return (await bridge.send('VKWebAppCallAPIMethod', {\r\n        method,\r\n        params: {\r\n            ...params,\r\n            v: '5.126',\r\n            access_token: params.access_token || '47bf45ba47bf45ba47bf45ba1347c8a732447bf47bf45ba271d2be46ed7aad788987004'\r\n        }\r\n    })).response\r\n}\r\n\r\nexport function viewportToPixels(value) {\r\n    const\r\n        parts = value.match(/([0-9\\.]+)(vh|vw)/),\r\n        q = Number(parts[1]),\r\n        side = window[['innerHeight', 'innerWidth'][['vh', 'vw'].indexOf(parts[2])]]\r\n    ;\r\n    return side * (q / 100)\r\n}\r\n\r\nexport function openUrl(url) {\r\n    const element = document.createElement('a');\r\n    element.href = url;\r\n    element.target = '_blank';\r\n    element.click();\r\n    element.remove();\r\n}\r\n\r\nexport function getUrlLocation() {\r\n    return window.location.origin + window.location.pathname.replace('/index.html', '');\r\n}\r\n\r\nexport function getSrcUrl(resource) {\r\n    return getUrlLocation() + resource.substring(1);\r\n}","import React from 'react';\r\nimport bridge from '@vkontakte/vk-bridge';\r\nimport '../css/AdvertisementApp.css';\r\n\r\nimport {\r\n    Panel,\r\n    View,\r\n    withAdaptivity,\r\n    SplitLayout,\r\n    SplitCol,\r\n    Epic,\r\n    Group,\r\n    Cell,\r\n    Tabbar,\r\n    TabbarItem,\r\n    PanelHeader,\r\n    PanelHeaderBack,\r\n    ViewWidth,\r\n    PanelHeaderClose,\r\n    Button,\r\n    FormLayout,\r\n    FormItem,\r\n    Input,\r\n    FormLayoutGroup,\r\n    Div,\r\n    ModalRoot,\r\n    ModalPage,\r\n    ModalPageHeader,\r\n    PanelHeaderSubmit, IconButton,\r\n    CardGrid, Card, Title, Link, Subhead, Headline, Text, CustomSelectOption, Avatar, Select, Textarea, ScreenSpinner\r\n} from '@vkontakte/vkui';\r\nimport {ChipsSelect} from '@vkontakte/vkui/dist/unstable';\r\nimport {\r\n    Icon28ServicesCircleFillBlue,\r\n    Icon28Profile,\r\n    Icon28AddOutline,\r\n    Icon16LinkOutline,\r\n    Icon16InfoOutline,\r\n    Icon28Users3Outline,\r\n    Icon28StatisticCircleFillBlue,\r\n    Icon28MessageCircleFillGreen,\r\n    Icon28RepostCircleFillGreen, Icon28MoneyTransferCircleFillRed, Icon24DeleteOutline, Icon28StarsCircleFillViolet\r\n} from \"@vkontakte/icons\";\r\n\r\nimport fetch from 'node-fetch';\r\n\r\nimport {registerFont, createCanvas, loadImage} from 'canvas';\r\nimport request from \"request\";\r\n\r\nimport {get, getUrlParams, openUrl} from \"../js/utils\";\r\n\r\nconst\r\n    apiUrl = 'https://api.ad-app.ru/method/',\r\n    uploadUrl = 'https://murmuring-bastion-20764.herokuapp.com/https://api.imgbb.com/1/upload?key=b2bfb837d63c6adae4d191841abb04dc',\r\n\r\n    MODAL_PAGE_EDIT_PROFILE = 'edit-profile',\r\n    MODAL_PAGE_ADD_PROFILE = 'add-profile',\r\n    MODAL_PAGE_VIEW_PROFILE = 'view-profile',\r\n    MODAL_PAGE_EDIT_APP = 'edit-app',\r\n    MODAL_PAGE_ADD_APP = 'add-app',\r\n    MODAL_PAGE_EDIT_GROUP = 'edit-group',\r\n    MODAL_PAGE_ADD_GROUP = 'add-group',\r\n    MODAL_PAGE_INFO_REF = 'info-ref',\r\n    MODAL_PAGE_ADD_WALL = 'add-wall',\r\n    MODAL_PAGE_ADD_STICKER = 'add-sticker',\r\n    MODAL_PAGE_EDIT_STICKER = 'edit-sticker'\r\n;\r\n\r\nclass AdvertisementApp extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            activeStory: 'apps',\r\n            storyHistory: {\r\n                apps: ['apps'],\r\n                accounts: ['accounts'],\r\n                groups: ['groups'],\r\n                stats: ['stats'],\r\n                advert_messages: ['advert_messages'],\r\n                advert_group: ['advert_group'],\r\n                our_advert: ['our_advert'],\r\n                site_content: ['site_content']\r\n            },\r\n\r\n            modalHistory: [],\r\n            modalInfo: {},\r\n\r\n            advert_messages_params: [],\r\n            advert_group_params: [],\r\n\r\n            selectedAppIdForWall: 0,\r\n\r\n            data_apps: [],\r\n            data_accounts: [],\r\n            data_groups: [],\r\n            data_stats: [],\r\n            data_advert_messages: [],\r\n            data_advert_group: [],\r\n            data_our_advert: [],\r\n            data_site_content: []\r\n        };\r\n\r\n        this.componentDidMount = this.componentDidMount.bind(this);\r\n        this.canGoBack = () => {\r\n            const currentHistory = this.state.storyHistory[this.state.activeStory];\r\n            return currentHistory.length > 1;\r\n        };\r\n        this.back = () => {\r\n            if (this.state.popout !== null) {\r\n                this.setState({popout: null});\r\n                window.history.pushState({pop: 'popout'}, 'Title');\r\n                return;\r\n            }\r\n            const\r\n                {activeStory, storyHistory} = this.state,\r\n                currentHistory = storyHistory[activeStory]\r\n            ;\r\n\r\n            if (currentHistory.length > 1) {\r\n                currentHistory.pop();\r\n                this.setState({storyHistory, snackbar: null});\r\n            } else {\r\n                bridge.send('VKWebAppClose', {status: 'success'});\r\n            }\r\n        };\r\n        this.go = (panel) => {\r\n            let {history} = this.state;\r\n            if (history[history.length - 1] !== panel) {\r\n                history.push(panel);\r\n                window.history.pushState({activePanel: panel}, 'Title');\r\n                this.setState({activePanel: panel, history, snackbar: null});\r\n            }\r\n        };\r\n        this.onStoryChange = (e) => this.setState({activeStory: e.currentTarget.dataset.story});\r\n        this.onInputChange = (e) => {\r\n            const {name, value} = e.currentTarget;\r\n            this.setState({[name]: value});\r\n        };\r\n        this.modalBack = () => {\r\n            const {modalHistory} = this.state;\r\n            modalHistory.pop();\r\n            this.setState({modalHistory})\r\n        };\r\n        this.setActiveModal = (activeModal) => this.setState({\r\n            modalHistory: [...this.state.modalHistory, activeModal]\r\n        });\r\n    }\r\n\r\n    async componentDidMount() {\r\n        window.addEventListener('popstate', e => {\r\n            e.preventDefault();\r\n            this.back();\r\n        });\r\n\r\n        bridge.subscribe(async ({detail: {type, data}}) => {\r\n            if (type !== undefined) console.log(type, data);\r\n            if (type === 'VKWebAppUpdateConfig') {\r\n                const schemeAttribute = document.createAttribute('scheme');\r\n                schemeAttribute.value = data.scheme ? data.scheme === 'client_light' ? 'bright_light' : data.scheme : 'bright_light';\r\n                document.body.attributes.setNamedItem(schemeAttribute);\r\n            } else if (type === 'VKWebAppViewRestore') {\r\n                this.setState({popout: null});\r\n            }\r\n        });\r\n\r\n        bridge.send('VKWebAppInit');\r\n        bridge.send('VKWebAppEnableSwipeBack');\r\n    }\r\n\r\n    async uploadFile(evt) {\r\n        const\r\n            tgt = evt.target || window.event.srcElement,\r\n            {files} = tgt\r\n        ;\r\n\r\n        if (FileReader && files && files.length) {\r\n            return await new Promise(async resolve => {\r\n                let\r\n                    file = files[0],\r\n                    fr = new FileReader()\r\n                ;\r\n\r\n                fr.onload = async () => {\r\n                    if (file.type.includes('image')) {\r\n                        let image = new Image();\r\n                        image.src = fr.result;\r\n                        image.onload = async () => {\r\n                            const\r\n                                canvas = createCanvas(image.width, image.height),\r\n                                ctx = canvas.getContext('2d')\r\n                            ;\r\n                            ctx.drawImage(image, 0, 0, image.width, image.height);\r\n\r\n                            await request({\r\n                                url: uploadUrl, method: 'POST', form: {\r\n                                    image: canvas.toDataURL('image/png').replace('data:image/png;base64,', '')\r\n                                }\r\n                            }, (error, response, body) => {\r\n                                try {\r\n                                    if (response.statusCode === 200) {\r\n                                        resolve(JSON.parse(body).data.url);\r\n                                    } else {\r\n                                        console.log('error', body);\r\n                                        resolve(false);\r\n                                    }\r\n                                } catch (e) {\r\n                                    console.error(e);\r\n                                    resolve(false);\r\n                                }\r\n                            });\r\n                        };\r\n                    }\r\n                };\r\n\r\n                await fr.readAsDataURL(file);\r\n            });\r\n        }\r\n    }\r\n\r\n\r\n    render() {\r\n        const\r\n            {\r\n                activeStory, storyHistory, modalHistory, modalInfo,\r\n\r\n                advert_messages_params, advert_messages_groups,\r\n                advert_group_params, advert_group_groups,\r\n\r\n                selectedAppIdForWall,\r\n\r\n                data_site_content,\r\n                uploadedFile\r\n            } = this.state,\r\n            tabs = [\r\n                {\r\n                    caption: 'Приложения',\r\n                    icon: <Icon28ServicesCircleFillBlue/>,\r\n                    id: 'apps',\r\n                    panels: [\r\n                        <Panel id='apps'>\r\n                            <PanelHeader left={this.canGoBack() ? <PanelHeaderBack onClick={this.back}/> :\r\n                                <PanelHeaderClose onClick={this.back}/>}\r\n                            >\r\n                                Приложения\r\n                            </PanelHeader>\r\n                            <Button\r\n                                size='l' before={<Icon28AddOutline/>}\r\n                                onClick={() => {\r\n                                    this.setActiveModal(MODAL_PAGE_ADD_APP);\r\n                                }}\r\n                            >\r\n                                Добавить\r\n                            </Button>\r\n                            {\r\n                                [\r\n                                    {\r\n                                        admin_id: 1,\r\n                                        app_id: 845657,\r\n                                        app_name: 'Название приложения',\r\n                                        group_message: 1,\r\n                                        group_subscribe: 2,\r\n                                        app_url: 'https://example.com/',\r\n                                        app_sign: 'https://example.com/'\r\n                                    }\r\n                                ].map((value, index) =>\r\n                                    <Group key={`Group_${index}`} style={{marginTop: 12}}>\r\n                                        <FormLayout>\r\n                                            <FormLayoutGroup mode='horizontal'>\r\n                                                <FormItem top='Идентификатор'>\r\n                                                    <Input\r\n                                                        contentEditable={false} value={value.app_id}\r\n                                                        after={<IconButton\r\n                                                            onClick={() => openUrl('https://vk.com/app' + value.app_id)}><Icon16LinkOutline/></IconButton>}\r\n                                                    />\r\n                                                </FormItem>\r\n                                                <FormItem top='Название'>\r\n                                                    <Input\r\n                                                        contentEditable={false} value={value.app_name}\r\n                                                    />\r\n                                                </FormItem>\r\n                                            </FormLayoutGroup>\r\n                                            <FormLayoutGroup mode='horizontal'>\r\n                                                <FormItem top='Администратор'>\r\n                                                    <Input\r\n                                                        contentEditable={false} value={value.admin_id}\r\n                                                        after={<IconButton\r\n                                                            onClick={() => {\r\n                                                                this.setState({\r\n                                                                    modalInfo: {\r\n                                                                        id: value.admin_id,\r\n                                                                        login: '+12345678900',\r\n                                                                        password: 'testpassword'\r\n                                                                    }\r\n                                                                });\r\n                                                                this.setActiveModal(MODAL_PAGE_VIEW_PROFILE);\r\n                                                            }}><Icon16InfoOutline/></IconButton>}\r\n                                                    />\r\n                                                </FormItem>\r\n                                                <FormItem\r\n                                                    top='APP_URL'\r\n                                                >\r\n                                                    <Input contentEditable={false}\r\n                                                           value={value.app_url}/>\r\n                                                </FormItem>\r\n                                                <FormItem\r\n                                                    top='APP_SIGN'\r\n                                                >\r\n                                                    <Input contentEditable={false}\r\n                                                           value={value.app_sign}/>\r\n                                                </FormItem>\r\n                                            </FormLayoutGroup>\r\n                                            <FormLayoutGroup mode='horizontal'>\r\n                                                <FormItem\r\n                                                    top='Группа на сообщения'\r\n                                                >\r\n                                                    <Input contentEditable={false}\r\n                                                           value={value.group_message}\r\n                                                           after={<IconButton\r\n                                                               onClick={() => openUrl('https://vk.com/public' + value.group_message)}><Icon16LinkOutline/></IconButton>}\r\n                                                    />\r\n                                                </FormItem>\r\n                                                <FormItem\r\n                                                    top='Группа на подписку'\r\n                                                >\r\n                                                    <Input contentEditable={false}\r\n                                                           value={value.group_subscribe}\r\n                                                           after={<IconButton\r\n                                                               onClick={() => openUrl('https://vk.com/public' + value.group_subscribe)}><Icon16LinkOutline/></IconButton>}\r\n                                                    />\r\n                                                </FormItem>\r\n                                            </FormLayoutGroup>\r\n                                            <Div style={{display: 'flex'}}>\r\n                                                <Button\r\n                                                    stretched mode='editable' size='m'\r\n                                                    onClick={() => {\r\n                                                        this.setState({modalInfo: value});\r\n                                                        this.setActiveModal(MODAL_PAGE_EDIT_APP);\r\n                                                    }}\r\n                                                >\r\n                                                    Изменить\r\n                                                </Button>\r\n                                                <Button\r\n                                                    stretched mode='destructive' size='m'\r\n                                                    style={{\r\n                                                        marginLeft: 4\r\n                                                    }}\r\n                                                >\r\n                                                    Удалить\r\n                                                </Button>\r\n                                            </Div>\r\n                                        </FormLayout>\r\n                                    </Group>\r\n                                )\r\n                            }\r\n                        </Panel>\r\n                    ],\r\n                    modal: <ModalRoot activeModal={modalHistory[modalHistory.length - 1]}>\r\n                        <ModalPage\r\n                            id={MODAL_PAGE_VIEW_PROFILE}\r\n                            onClose={this.modalBack}\r\n                            header={\r\n                                <ModalPageHeader>Профиль</ModalPageHeader>\r\n                            }\r\n                        >\r\n                            <Group>\r\n                                <FormLayout>\r\n                                    <FormLayoutGroup mode='horizontal'>\r\n                                        <FormItem top='Логин'>\r\n                                            <Input contentEditable={false}\r\n                                                   value={modalInfo.login}/>\r\n                                        </FormItem>\r\n                                        <FormItem top='Пароль'>\r\n                                            <Input contentEditable={false}\r\n                                                   value={modalInfo.password}/>\r\n                                        </FormItem>\r\n                                    </FormLayoutGroup>\r\n                                    <Button\r\n                                        stretched mode='primary' size='m'\r\n                                        onClick={() => openUrl('https://vk.com/id' + modalInfo.id)}\r\n                                    >\r\n                                        Перейти\r\n                                    </Button>\r\n                                </FormLayout>\r\n                            </Group>\r\n                        </ModalPage>\r\n                        <ModalPage\r\n                            id={MODAL_PAGE_EDIT_APP}\r\n                            onClose={this.modalBack}\r\n                            header={\r\n                                <ModalPageHeader\r\n                                    right={<PanelHeaderSubmit onClick={this.modalBack}/>}\r\n                                >\r\n                                    Редактирование\r\n                                </ModalPageHeader>\r\n                            }\r\n                        >\r\n                            <Group>\r\n                                <FormLayout>\r\n                                    <FormLayoutGroup mode='horizontal'>\r\n                                        <FormItem\r\n                                            top='APP_URL'\r\n                                        >\r\n                                            <Input getRef={(ref) => this.inputAppUrlRef = ref}\r\n                                                   defaultValue={modalInfo.app_url}/>\r\n                                        </FormItem>\r\n                                        <FormItem\r\n                                            top='APP_SIGN'\r\n                                        >\r\n                                            <Input getRef={(ref) => this.inputAppUrlRef = ref}\r\n                                                   defaultValue={modalInfo.app_sign}/>\r\n                                        </FormItem>\r\n                                        <FormItem\r\n                                            top='Группа на сообщения'\r\n                                        >\r\n                                            <Input getRef={(ref) => this.inputAppGroupMessagesRef = ref}\r\n                                                   defaultValue={modalInfo.group_message}\r\n                                            />\r\n                                        </FormItem>\r\n                                        <FormItem\r\n                                            top='Группа на подписку'\r\n                                        >\r\n                                            <Input getRef={(ref) => this.inputAppGroupSubscribeRef = ref}\r\n                                                   defaultValue={modalInfo.group_subscribe}\r\n                                            />\r\n                                        </FormItem>\r\n                                    </FormLayoutGroup>\r\n                                </FormLayout>\r\n                            </Group>\r\n                        </ModalPage>\r\n                        <ModalPage\r\n                            id={MODAL_PAGE_ADD_APP}\r\n                            onClose={this.modalBack}\r\n                            header={\r\n                                <ModalPageHeader\r\n                                    right={<PanelHeaderSubmit onClick={this.modalBack}/>}\r\n                                >\r\n                                    Добавление\r\n                                </ModalPageHeader>\r\n                            }\r\n                        >\r\n                            <Group>\r\n                                <FormLayout>\r\n                                    <FormLayoutGroup mode='horizontal'>\r\n                                        <FormItem top='Идентификатор'>\r\n                                            <Input\r\n                                                getRef={(ref) => this.inputAppIdRef = ref}\r\n                                            />\r\n                                        </FormItem>\r\n                                        <FormItem top='Администратор'>\r\n                                            <Input\r\n                                                getRef={(ref) => this.inputAppAdminRef = ref}\r\n                                            />\r\n                                        </FormItem>\r\n                                        <FormItem\r\n                                            top='APP_URL'\r\n                                        >\r\n                                            <Input getRef={(ref) => this.inputAppUrlRef = ref}/>\r\n                                        </FormItem>\r\n                                        <FormItem\r\n                                            top='APP_SIGN'\r\n                                        >\r\n                                            <Input getRef={(ref) => this.inputAppSignRef = ref}/>\r\n                                        </FormItem>\r\n                                    </FormLayoutGroup>\r\n                                    <FormLayoutGroup mode='horizontal'>\r\n                                        <FormItem\r\n                                            top='Группа на сообщения'\r\n                                        >\r\n                                            <Input getRef={(ref) => this.inputAppGroupMessagesRef = ref}\r\n                                            />\r\n                                        </FormItem>\r\n                                        <FormItem\r\n                                            top='Группа на подписку'\r\n                                        >\r\n                                            <Input getRef={(ref) => this.inputAppGroupSubscribeRef = ref}\r\n                                            />\r\n                                        </FormItem>\r\n                                    </FormLayoutGroup>\r\n                                </FormLayout>\r\n                            </Group>\r\n                        </ModalPage>\r\n                    </ModalRoot>\r\n                },\r\n                {\r\n                    caption: 'Аккаунты',\r\n                    icon: <Icon28Profile/>,\r\n                    id: 'accounts',\r\n                    panels: <Panel id='accounts'>\r\n                        <PanelHeader left={this.canGoBack() ? <PanelHeaderBack onClick={this.back}/> :\r\n                            <PanelHeaderClose onClick={this.back}/>}\r\n                        >\r\n                            Аккаунты\r\n                        </PanelHeader>\r\n                        <Button\r\n                            size='l' before={<Icon28AddOutline/>}\r\n                            onClick={() => {\r\n                                this.setActiveModal(MODAL_PAGE_ADD_PROFILE);\r\n                            }}\r\n                        >\r\n                            Добавить\r\n                        </Button>\r\n                        {\r\n                            [\r\n                                {\r\n                                    id: 1,\r\n                                    login: '+12345678900',\r\n                                    password: 'testpassword',\r\n                                    access_token: 'asdyu0ady81liu34j2gk3oejfiwfs7df767723h'\r\n                                }\r\n                            ].map((value, index) =>\r\n                                <Group key={`Group_${index}`} style={{marginTop: 12}}>\r\n                                    <FormLayout>\r\n                                        <FormLayoutGroup mode='horizontal'>\r\n                                            <FormItem top='Идентификатор'>\r\n                                                <Input contentEditable={false} value={value.id}\r\n                                                       after={<IconButton\r\n                                                           onClick={() => {\r\n                                                               openUrl('https://vk.com/id' + value.id)\r\n                                                           }}><Icon16LinkOutline/></IconButton>}\r\n                                                />\r\n                                            </FormItem>\r\n                                            <FormItem top='Логин'>\r\n                                                <Input contentEditable={false} value={value.login}/>\r\n                                            </FormItem>\r\n                                            <FormItem top='Пароль'>\r\n                                                <Input contentEditable={false} value={value.password}/>\r\n                                            </FormItem>\r\n                                        </FormLayoutGroup>\r\n                                        <FormItem\r\n                                            top='Токен'\r\n                                        >\r\n                                            <Input contentEditable={false} value={value.access_token}/>\r\n                                        </FormItem>\r\n                                        <Div style={{display: 'flex'}}>\r\n                                            <Button\r\n                                                stretched mode='editable' size='m'\r\n                                                onClick={() => {\r\n                                                    this.setState({modalInfo: value});\r\n                                                    this.setActiveModal(MODAL_PAGE_EDIT_PROFILE);\r\n                                                }}\r\n                                            >\r\n                                                Изменить\r\n                                            </Button>\r\n                                            <Button\r\n                                                stretched mode='destructive' size='m'\r\n                                                style={{\r\n                                                    marginLeft: 4\r\n                                                }}\r\n                                            >\r\n                                                Удалить\r\n                                            </Button>\r\n                                        </Div>\r\n                                    </FormLayout>\r\n                                </Group>\r\n                            )\r\n                        }\r\n                    </Panel>,\r\n                    modal: <ModalRoot activeModal={modalHistory[modalHistory.length - 1]}>\r\n                        <ModalPage\r\n                            id={MODAL_PAGE_EDIT_PROFILE}\r\n                            onClose={this.modalBack}\r\n                            header={\r\n                                <ModalPageHeader\r\n                                    right={<PanelHeaderSubmit onClick={this.modalBack}/>}\r\n                                >\r\n                                    Редактирование\r\n                                </ModalPageHeader>\r\n                            }\r\n                        >\r\n                            <Group>\r\n                                <FormLayout>\r\n                                    <FormLayoutGroup mode='horizontal'>\r\n                                        <FormItem top='Логин'>\r\n                                            <Input getRef={(ref) => this.inputLoginRef = ref}\r\n                                                   defaultValue={modalInfo.login}/>\r\n                                        </FormItem>\r\n                                        <FormItem top='Пароль'>\r\n                                            <Input getRef={(ref) => this.inputPasswordRef = ref}\r\n                                                   defaultValue={modalInfo.password}/>\r\n                                        </FormItem>\r\n                                    </FormLayoutGroup>\r\n                                    <FormItem\r\n                                        top='Токен'\r\n                                    >\r\n                                        <Input getRef={(ref) => this.inputTokenRef = ref}\r\n                                               defaultValue={modalInfo.access_token}/>\r\n                                    </FormItem>\r\n                                </FormLayout>\r\n                            </Group>\r\n                        </ModalPage>\r\n                        <ModalPage\r\n                            id={MODAL_PAGE_ADD_PROFILE}\r\n                            onClose={this.modalBack}\r\n                            header={\r\n                                <ModalPageHeader\r\n                                    right={<PanelHeaderSubmit onClick={this.modalBack}/>}\r\n                                >\r\n                                    Добавление\r\n                                </ModalPageHeader>\r\n                            }\r\n                        >\r\n                            <Group>\r\n                                <FormLayout>\r\n                                    <FormLayoutGroup mode='horizontal'>\r\n                                        <FormItem top='Логин'>\r\n                                            <Input getRef={(ref) => this.inputLoginRef = ref}/>\r\n                                        </FormItem>\r\n                                        <FormItem top='Пароль'>\r\n                                            <Input getRef={(ref) => this.inputPasswordRef = ref}/>\r\n                                        </FormItem>\r\n                                    </FormLayoutGroup>\r\n                                    <FormItem top='Токен'>\r\n                                        <Input getRef={(ref) => this.inputTokenRef = ref}/>\r\n                                    </FormItem>\r\n                                </FormLayout>\r\n                            </Group>\r\n                        </ModalPage>\r\n                    </ModalRoot>\r\n                },\r\n                {\r\n                    caption: 'Группы',\r\n                    icon: <Icon28Users3Outline/>,\r\n                    id: 'groups',\r\n                    panels: [\r\n                        <Panel id='groups'>\r\n                            <PanelHeader left={this.canGoBack() ? <PanelHeaderBack onClick={this.back}/> :\r\n                                <PanelHeaderClose onClick={this.back}/>}\r\n                            >\r\n                                Группы\r\n                            </PanelHeader>\r\n                            <Button\r\n                                size='l' before={<Icon28AddOutline/>}\r\n                                onClick={() => {\r\n                                    this.setActiveModal(MODAL_PAGE_ADD_GROUP);\r\n                                }}\r\n                            >\r\n                                Создать\r\n                            </Button>\r\n                            {\r\n                                [\r\n                                    {\r\n                                        group_id: 1,\r\n                                        title: 'Название группы',\r\n                                        photo_url: 'https://i.ibb.co/pbZrHDc/coal.png',\r\n                                        admin_id: 1\r\n                                    }\r\n                                ].map((value, index) =>\r\n                                    <Group key={`Group_${index}`} style={{marginTop: 12}}>\r\n                                        <FormLayout>\r\n                                            <FormLayoutGroup mode='horizontal'>\r\n                                                <Avatar size={62} src={value.photo_url} style={{marginRight: 24}}/>\r\n                                                <FormItem top='Название'>\r\n                                                    <Input contentEditable={false} value={value.title}/>\r\n                                                </FormItem>\r\n                                            </FormLayoutGroup>\r\n                                            <FormLayoutGroup mode='horizontal'>\r\n                                                <FormItem top='Идентификатор'>\r\n                                                    <Input\r\n                                                        contentEditable={false} value={value.group_id}\r\n                                                        after={<IconButton\r\n                                                            onClick={() => openUrl('https://vk.com/public' + value.group_id)}><Icon16LinkOutline/></IconButton>}\r\n                                                    />\r\n                                                </FormItem>\r\n                                                <FormItem top='Администратор'>\r\n                                                    <Input\r\n                                                        contentEditable={false} value={value.admin_id}\r\n                                                        after={<IconButton\r\n                                                            onClick={() => {\r\n                                                                this.setState({\r\n                                                                    modalInfo: {\r\n                                                                        id: value.admin_id,\r\n                                                                        login: '+12345678900',\r\n                                                                        password: 'testpassword'\r\n                                                                    }\r\n                                                                });\r\n                                                                this.setActiveModal(MODAL_PAGE_VIEW_PROFILE);\r\n                                                            }}><Icon16InfoOutline/></IconButton>}\r\n                                                    />\r\n                                                </FormItem>\r\n                                                <FormItem\r\n                                                    top='PHOTO_URL'\r\n                                                >\r\n                                                    <Input contentEditable={false}\r\n                                                           value={value.photo_url}/>\r\n                                                </FormItem>\r\n                                            </FormLayoutGroup>\r\n                                            <Div style={{display: 'flex'}}>\r\n                                                <Button\r\n                                                    stretched mode='editable' size='m'\r\n                                                    onClick={() => {\r\n                                                        this.setState({modalInfo: value});\r\n                                                        this.setActiveModal(MODAL_PAGE_EDIT_GROUP);\r\n                                                    }}\r\n                                                >\r\n                                                    Изменить\r\n                                                </Button>\r\n                                                <Button\r\n                                                    stretched mode='destructive' size='m'\r\n                                                    style={{\r\n                                                        marginLeft: 4\r\n                                                    }}\r\n                                                >\r\n                                                    Удалить\r\n                                                </Button>\r\n                                            </Div>\r\n                                        </FormLayout>\r\n                                    </Group>\r\n                                )\r\n                            }\r\n                        </Panel>\r\n                    ],\r\n                    modal: <ModalRoot activeModal={modalHistory[modalHistory.length - 1]}>\r\n                        <ModalPage\r\n                            id={MODAL_PAGE_VIEW_PROFILE}\r\n                            onClose={this.modalBack}\r\n                            header={\r\n                                <ModalPageHeader>Профиль</ModalPageHeader>\r\n                            }\r\n                        >\r\n                            <Group>\r\n                                <FormLayout>\r\n                                    <FormLayoutGroup mode='horizontal'>\r\n                                        <FormItem top='Логин'>\r\n                                            <Input contentEditable={false}\r\n                                                   value={modalInfo.login}/>\r\n                                        </FormItem>\r\n                                        <FormItem top='Пароль'>\r\n                                            <Input contentEditable={false}\r\n                                                   value={modalInfo.password}/>\r\n                                        </FormItem>\r\n                                    </FormLayoutGroup>\r\n                                    <Button\r\n                                        stretched mode='primary' size='m'\r\n                                        onClick={() => openUrl('https://vk.com/id' + modalInfo.id)}\r\n                                    >\r\n                                        Перейти\r\n                                    </Button>\r\n                                </FormLayout>\r\n                            </Group>\r\n                        </ModalPage>\r\n                        <ModalPage\r\n                            id={MODAL_PAGE_EDIT_GROUP}\r\n                            onClose={this.modalBack}\r\n                            header={\r\n                                <ModalPageHeader\r\n                                    right={<PanelHeaderSubmit onClick={this.modalBack}/>}\r\n                                >\r\n                                    Редактирование\r\n                                </ModalPageHeader>\r\n                            }\r\n                        >\r\n                            <Group>\r\n                                <FormLayout>\r\n                                    <FormLayoutGroup mode='horizontal'>\r\n                                        <FormItem top='Название'>\r\n                                            <Input getRef={(ref) => this.inputGroupNameRef = ref}\r\n                                                   defaultValue={modalInfo.title}/>\r\n                                        </FormItem>\r\n                                        <FormItem top='PHOTO_URL'>\r\n                                            <Input getRef={(ref) => this.inputGroupPhotoUrlRef = ref}\r\n                                                   defaultValue={modalInfo.photo_url}/>\r\n                                        </FormItem>\r\n                                    </FormLayoutGroup>\r\n                                    <FormItem top='Токен'>\r\n                                        <Input getRef={(ref) => this.inputGroupTokenRef = ref}\r\n                                               defaultValue={modalInfo.access_token}/>\r\n                                    </FormItem>\r\n                                </FormLayout>\r\n                            </Group>\r\n                        </ModalPage>\r\n                        <ModalPage\r\n                            id={MODAL_PAGE_ADD_GROUP}\r\n                            onClose={this.modalBack}\r\n                            header={\r\n                                <ModalPageHeader\r\n                                    right={<PanelHeaderSubmit onClick={this.modalBack}/>}\r\n                                >\r\n                                    Создание\r\n                                </ModalPageHeader>\r\n                            }\r\n                        >\r\n                            <Group>\r\n                                <FormLayout>\r\n                                    <FormItem top='Название'>\r\n                                        <Input getRef={(ref) => this.inputGroupNameRef = ref}/>\r\n                                    </FormItem>\r\n                                    <FormLayoutGroup mode='horizontal'>\r\n                                        <FormItem top='Администратор'>\r\n                                            <Input\r\n                                                getRef={(ref) => this.inputGroupAdminIdRef = ref}\r\n                                            />\r\n                                        </FormItem>\r\n                                        <FormItem\r\n                                            top='PHOTO_URL'\r\n                                        >\r\n                                            <Input getRef={(ref) => this.inputGroupPhotoUrlRef = ref}/>\r\n                                        </FormItem>\r\n                                    </FormLayoutGroup>\r\n                                </FormLayout>\r\n                            </Group>\r\n                        </ModalPage>\r\n                    </ModalRoot>\r\n                },\r\n                {\r\n                    caption: 'Статистика',\r\n                    icon: <Icon28StatisticCircleFillBlue/>,\r\n                    id: 'stats',\r\n                    panels: [\r\n                        <Panel id='stats'>\r\n                            <PanelHeader left={this.canGoBack() ? <PanelHeaderBack onClick={this.back}/> :\r\n                                <PanelHeaderClose onClick={this.back}/>}\r\n                            >\r\n                                Статистика\r\n                            </PanelHeader>\r\n                            {\r\n                                [\r\n                                    {\r\n                                        app_id: 845657,\r\n                                        group_message: 1,\r\n                                        group_subscribe: 2,\r\n                                        app_name: 'Название приложения',\r\n                                        users: 12345,\r\n                                        users_today: 123,\r\n                                        story_shares: 1234,\r\n                                        allowed_message: 1234,\r\n                                        subscribed_group: 1234,\r\n                                        refs: {\r\n                                            story: 1234\r\n                                        }\r\n                                    }\r\n                                ].map((value, index) =>\r\n                                    <Group key={`Group_${index}`} style={{marginTop: 12}}>\r\n                                        <Title style={{margin: 12}} level='2' weight='regular'>\r\n                                            {value.app_name} — <Link href={'https://vk.com/app' + value.app_id}\r\n                                                                     target='_blank'>app{value.app_id}</Link>\r\n                                        </Title>\r\n                                        <CardGrid style={{marginTop: 12}}>\r\n                                            <Card size='l' mode='shadow'>\r\n                                                <div className='CardStats__Container'>\r\n                                                    <Headline weight='regular'>\r\n                                                        Пользователи\r\n                                                    </Headline>\r\n                                                    <Title style={{marginTop: 4}} weight='bold' level={1}>\r\n                                                        {value.users}\r\n                                                    </Title>\r\n                                                    <Subhead style={{marginTop: 4}} weight='semibold'>\r\n                                                        +{value.users_today}\r\n                                                    </Subhead>\r\n                                                </div>\r\n                                            </Card>\r\n                                            {\r\n                                                [\r\n                                                    ['Историй', 'story_shares'],\r\n                                                    ['Разрешили сообщения', 'allowed_message', 'group_message'],\r\n                                                    ['Подписались на группу', 'subscribed_group', 'group_subscribe']\r\n                                                ].map((value1, index) =>\r\n                                                    <Card key={`Card_${index}`} size='l' mode='shadow'>\r\n                                                        <div className='CardStats__Container'>\r\n                                                            {\r\n                                                                value1.length > 2 ?\r\n                                                                    <Link target='_blank'\r\n                                                                          href={'https://vk.com/public' + [value[value1[2]]]}>\r\n                                                                        <Headline weight='regular'>\r\n                                                                            {value1[0]}\r\n                                                                        </Headline>\r\n                                                                    </Link>\r\n                                                                    :\r\n                                                                    <Headline weight='regular'>\r\n                                                                        {value1[0]}\r\n                                                                    </Headline>\r\n                                                            }\r\n                                                            <Title style={{marginTop: 4}} weight='bold' level={1}>\r\n                                                                {value[value1[1]]}\r\n                                                            </Title>\r\n                                                        </div>\r\n                                                    </Card>\r\n                                                )\r\n                                            }\r\n                                            <Card size='l' mode='shadow'>\r\n                                                <div className='CardStats__Container'>\r\n                                                    <div style={{display: 'flex', alignItems: 'center'}}>\r\n                                                        <Link onClick={() => {\r\n                                                            this.setState({modalInfo: value.refs});\r\n                                                            this.setActiveModal(MODAL_PAGE_INFO_REF);\r\n                                                        }}>\r\n                                                            <Headline weight='regular'>\r\n                                                                Источник\r\n                                                            </Headline>\r\n                                                        </Link>\r\n                                                    </div>\r\n                                                    <Title style={{marginTop: 4}} weight='bold' level={1}>\r\n                                                        {Object.keys(value.refs).sort((a, b) => value.refs[a] - value.refs[b]).reverse()[0]}\r\n                                                    </Title>\r\n                                                    <Subhead style={{marginTop: 4}} weight='semibold'>\r\n                                                        {value.refs[Object.keys(value.refs).sort((a, b) => value.refs[a] - value.refs[b]).reverse()[0]]}\r\n                                                    </Subhead>\r\n                                                </div>\r\n                                            </Card>\r\n                                        </CardGrid>\r\n                                    </Group>\r\n                                )\r\n                            }\r\n                        </Panel>\r\n                    ],\r\n                    modal: <ModalRoot activeModal={modalHistory[modalHistory.length - 1]}>\r\n                        <ModalPage\r\n                            id={MODAL_PAGE_INFO_REF}\r\n                            onClose={this.modalBack}\r\n                            header={\r\n                                <ModalPageHeader>Переходы в приложение</ModalPageHeader>\r\n                            }\r\n                        >\r\n                            <Group>\r\n                                {\r\n                                    [\r\n                                        Object.keys(modalInfo).map((value, index) =>\r\n                                            <Div key={`div_${index}`} style={{display: 'flex'}}>\r\n                                                <Text weight='regular'>{value}</Text>\r\n                                                <span style={{padding: '0 4px'}}> — </span>\r\n                                                <Text weight='semibold'>{modalInfo[value]}</Text>\r\n                                            </Div>\r\n                                        )\r\n                                    ]\r\n                                }\r\n                            </Group>\r\n                        </ModalPage>\r\n                    </ModalRoot>\r\n                },\r\n                {\r\n                    caption: 'Рассылка',\r\n                    icon: <Icon28MessageCircleFillGreen/>,\r\n                    id: 'advert_messages',\r\n                    panels: [\r\n                        <Panel id='advert_messages'>\r\n                            <PanelHeader left={this.canGoBack() ? <PanelHeaderBack onClick={this.back}/> :\r\n                                <PanelHeaderClose onClick={this.back}/>}\r\n                            >\r\n                                Рассылка\r\n                            </PanelHeader>\r\n                            <FormLayout>\r\n                                <FormItem top='Выберите группы'>\r\n                                    <ChipsSelect\r\n                                        showSelected={false}\r\n                                        closeAfterSelect={false}\r\n                                        value={advert_messages_groups}\r\n                                        onChange={advert_messages_groups => this.setState({advert_messages_groups})}\r\n                                        options={[\r\n                                            {\r\n                                                group_id: 1,\r\n                                                title: 'Название группы',\r\n                                                photo_url: 'https://i.ibb.co/pbZrHDc/coal.png',\r\n                                                admin_id: 1\r\n                                            }\r\n                                        ].map(value => {\r\n                                            return {value: value.group_id, label: value.title, src: value.photo_url}\r\n                                        })}\r\n                                        renderOption={({option: {src, value}, ...otherProps}) => {\r\n                                            return (\r\n                                                <CustomSelectOption\r\n                                                    before={<Avatar size={20} src={src}/>}\r\n                                                    {...otherProps}\r\n                                                />\r\n                                            );\r\n                                        }}\r\n                                    />\r\n                                </FormItem>\r\n                                <FormItem top='Добавьте параметр'>\r\n                                    <ChipsSelect\r\n                                        value={advert_messages_params}\r\n                                        onChange={advert_messages_params => {\r\n                                            if (this.state.advert_messages_params.length !== advert_messages_params.length) {\r\n                                                const value = this.state.advert_messages_params.filter(value => advert_messages_params.findIndex(value1 => value1.value === value.value) === -1);\r\n                                                for (let e of value) {\r\n                                                    this[`input_messages_${e.value}_param`] = undefined;\r\n                                                }\r\n                                            }\r\n                                            this.setState({advert_messages_params});\r\n                                        }}\r\n                                        options={['message', 'attachment', 'keyboard', 'dont_parse_links'].map(value => {\r\n                                            return {value, label: value}\r\n                                        })}\r\n                                        creatable={true}\r\n                                    />\r\n                                </FormItem>\r\n                                {advert_messages_params.map((value, index) => (\r\n                                    <FormLayoutGroup key={`LayoutGroup_${index}`} mode='horizontal'>\r\n                                        <FormItem>\r\n                                            <Input contentEditable='false' value={value.value}/>\r\n                                        </FormItem>\r\n                                        <FormItem>\r\n                                            <Input value={this[`input_messages_${value.value}_param`]}\r\n                                                   onChange={value1 =>\r\n                                                       this[`input_messages_${value.value}_param`] = value1.currentTarget.value\r\n                                                   }/>\r\n                                        </FormItem>\r\n                                    </FormLayoutGroup>\r\n                                ))}\r\n                                <Div>\r\n                                    <Button size='l'>Отправить</Button>\r\n                                </Div>\r\n                            </FormLayout>\r\n                        </Panel>\r\n                    ]\r\n                },\r\n                {\r\n                    caption: 'Реклама в группе',\r\n                    icon: <Icon28RepostCircleFillGreen/>,\r\n                    id: 'advert_group',\r\n                    panels: [\r\n                        <Panel id='advert_group'>\r\n                            <PanelHeader left={this.canGoBack() ? <PanelHeaderBack onClick={this.back}/> :\r\n                                <PanelHeaderClose onClick={this.back}/>}\r\n                            >\r\n                                Рекламный пост\r\n                            </PanelHeader>\r\n                            <FormLayout>\r\n                                <FormItem top='Выберите группы'>\r\n                                    <ChipsSelect\r\n                                        showSelected={false}\r\n                                        closeAfterSelect={false}\r\n                                        value={advert_group_groups}\r\n                                        onChange={advert_group_groups => this.setState({advert_group_groups})}\r\n                                        options={[\r\n                                            {\r\n                                                group_id: 1,\r\n                                                title: 'Название группы',\r\n                                                photo_url: 'https://i.ibb.co/pbZrHDc/coal.png',\r\n                                                admin_id: 1\r\n                                            }\r\n                                        ].map(value => {\r\n                                            return {value: value.group_id, label: value.title, src: value.photo_url}\r\n                                        })}\r\n                                        renderOption={({option: {src, value}, ...otherProps}) => {\r\n                                            return (\r\n                                                <CustomSelectOption\r\n                                                    before={<Avatar size={20} src={src}/>}\r\n                                                    {...otherProps}\r\n                                                />\r\n                                            );\r\n                                        }}\r\n                                    />\r\n                                </FormItem>\r\n                                <FormItem top='Добавьте параметр'>\r\n                                    <ChipsSelect\r\n                                        value={advert_group_params}\r\n                                        onChange={advert_group_params => this.setState({advert_group_params})}\r\n                                        options={['owner_id', 'message', 'attachments', 'publish_date', 'post_id', 'mark_as_ads', 'close_comments', 'copyright'].map(value => {\r\n                                            return {value, label: value}\r\n                                        })}\r\n                                        creatable={true}\r\n                                    />\r\n                                </FormItem>\r\n                                {advert_group_params.map((value, index) => (\r\n                                    <FormLayoutGroup mode='horizontal'>\r\n                                        <FormItem>\r\n                                            <Input contentEditable='false' value={value.value}/>\r\n                                        </FormItem>\r\n                                        <FormItem>\r\n                                            <Input value={this[`input_group_${value.value}_param`]} onChange={value1 =>\r\n                                                this[`input_group_${value.value}_param`] = value1.currentTarget.value\r\n                                            }/>\r\n                                        </FormItem>\r\n                                    </FormLayoutGroup>\r\n                                ))}\r\n                                <Div>\r\n                                    <Button size='l'>Отправить</Button>\r\n                                </Div>\r\n                            </FormLayout>\r\n                        </Panel>\r\n                    ]\r\n                },\r\n                {\r\n                    caption: 'Рекламные записи',\r\n                    icon: <Icon28MoneyTransferCircleFillRed/>,\r\n                    id: 'our_advert',\r\n                    panels: [\r\n                        <Panel id='our_advert'>\r\n                            <PanelHeader left={this.canGoBack() ? <PanelHeaderBack onClick={this.back}/> :\r\n                                <PanelHeaderClose onClick={this.back}/>}\r\n                            >\r\n                                Рекламные записи\r\n                            </PanelHeader>\r\n                            <Button\r\n                                size='l' before={<Icon28AddOutline/>}\r\n                                onClick={() => {\r\n                                    this.setActiveModal(MODAL_PAGE_ADD_WALL);\r\n                                }}\r\n                            >\r\n                                Добавить\r\n                            </Button>\r\n                            <FormItem top='Группировать по приложению'>\r\n                                <Select\r\n                                    value={selectedAppIdForWall}\r\n                                    onChange={(value) => this.setState({selectedAppIdForWall: value.currentTarget.value})}\r\n                                    options={[\r\n                                        {\r\n                                            label: 'Не выбрано',\r\n                                            value: 0\r\n                                        },\r\n                                        ...[\r\n                                            {\r\n                                                admin_id: 1,\r\n                                                app_id: 845657,\r\n                                                app_name: 'Название приложения',\r\n                                                group_message: 1,\r\n                                                group_subscribe: 2,\r\n                                                app_url: 'https://example.com/',\r\n                                                app_sign: ''\r\n                                            }\r\n                                        ].map(value => ({\r\n                                            label: `${value.app_name} (app${value.app_id})`,\r\n                                            value: value.app_id\r\n                                        }))\r\n                                    ]}\r\n                                />\r\n                            </FormItem>\r\n                            {\r\n                                [\r\n                                    {\r\n                                        owner_id: -173263813,\r\n                                        id: 2490,\r\n                                        views: 3700,\r\n                                        likes: 28,\r\n                                        comments: 20,\r\n                                        reposts: 27,\r\n                                        price: 100,\r\n                                        app_id: 845656\r\n                                    }\r\n                                ].filter(value => selectedAppIdForWall == 0 || value.app_id === selectedAppIdForWall).map((value, index) =>\r\n                                    <Group key={`Wall_${index}`} style={{marginTop: 12}}>\r\n                                        <div style={{display: 'flex', alignItems: 'center'}}>\r\n                                            <Title style={{margin: 12}} level='2' weight='regular'>\r\n                                                <Link href={`https://vk.com/wall${value.owner_id}_${value.id}`}\r\n                                                      target='_blank'>\r\n                                                    {`wall${value.owner_id}_${value.id}`}\r\n                                                </Link>\r\n                                            </Title>\r\n                                            <IconButton\r\n                                                style={{color: 'var(--destructive)'}}><Icon24DeleteOutline/></IconButton>\r\n                                        </div>\r\n                                        <CardGrid style={{marginTop: 12}}>\r\n                                            {\r\n                                                [\r\n                                                    ['Просмотры', 'views'],\r\n                                                    ['Лайки', 'likes'],\r\n                                                    ['Комментарии', 'comments'],\r\n                                                    ['Репосты', 'reposts'],\r\n                                                    ['Стоимость', 'price']\r\n                                                ].map((value1, index) =>\r\n                                                    <Card key={`Card_${index}`} size='l' mode='shadow'>\r\n                                                        <div className='CardStats__Container'>\r\n                                                            <Headline weight='regular'>\r\n                                                                {value1[0]}\r\n                                                            </Headline>\r\n                                                            <Title style={{marginTop: 4}} weight='bold' level={1}>\r\n                                                                {value[value1[1]]}\r\n                                                            </Title>\r\n                                                        </div>\r\n                                                    </Card>\r\n                                                )\r\n                                            }\r\n                                        </CardGrid>\r\n                                    </Group>\r\n                                )\r\n                            }\r\n                        </Panel>\r\n                    ],\r\n                    modal: <ModalRoot activeModal={modalHistory[modalHistory.length - 1]}>\r\n                        <ModalPage\r\n                            id={MODAL_PAGE_ADD_WALL}\r\n                            onClose={this.modalBack}\r\n                            header={\r\n                                <ModalPageHeader>Добавление записи</ModalPageHeader>\r\n                            }\r\n                        >\r\n                            <Group>\r\n                                <FormLayout>\r\n                                    <FormLayoutGroup mode='horizontal'>\r\n                                        <FormItem top='Ссылка'>\r\n                                            <Input getRef={(ref) => this.inputWallUrlRef = ref}\r\n                                                   placeholder='vk.com/wall-1_1'/>\r\n                                        </FormItem>\r\n                                        <FormItem top='Стоимость'>\r\n                                            <Input getRef={(ref) => this.inputWallPriceRef = ref} type='number'/>\r\n                                        </FormItem>\r\n                                    </FormLayoutGroup>\r\n                                    <FormItem top='APP_ID'>\r\n                                        <Input getRef={(ref) => this.inputWallAppIdRef = ref}/>\r\n                                    </FormItem>\r\n                                    <Button\r\n                                        stretched mode='primary' size='m'\r\n                                        onClick={() => this.modalBack()}\r\n                                    >\r\n                                        Добавить\r\n                                    </Button>\r\n                                </FormLayout>\r\n                            </Group>\r\n                        </ModalPage>\r\n                    </ModalRoot>\r\n                },\r\n                {\r\n                    caption: 'Контент сайта',\r\n                    icon: <Icon28StarsCircleFillViolet/>,\r\n                    id: 'site_content',\r\n                    panels: [\r\n                        <Panel id='site_content'>\r\n                            <PanelHeader left={this.canGoBack() ? <PanelHeaderBack onClick={this.back}/> :\r\n                                <PanelHeaderClose onClick={this.back}/>}\r\n                            >\r\n                                Контент сайта\r\n                            </PanelHeader>\r\n                            <Button\r\n                                size='l' before={<Icon28AddOutline/>}\r\n                                onClick={() => {\r\n                                    this.setState({uploadedFile: false});\r\n                                    this.setActiveModal(MODAL_PAGE_ADD_STICKER);\r\n                                }}\r\n                            >\r\n                                Добавить\r\n                            </Button>\r\n                            {\r\n                                data_site_content.map((value, index) =>\r\n                                    <Group key={`Group_${index}`} style={{marginTop: 12}}>\r\n                                        <FormLayout>\r\n                                            <FormLayoutGroup mode='horizontal'>\r\n                                                <Avatar size={62} src={value.image}/>\r\n                                                <FormItem style={{marginLeft: 12}} top='Название'>\r\n                                                    <Input\r\n                                                        contentEditable={false} value={value.title}\r\n                                                        after={<IconButton\r\n                                                            onClick={() => openUrl('https://stickers.ad-app.ru/#article' + value.id)}><Icon16LinkOutline/></IconButton>}/>\r\n                                                </FormItem>\r\n                                                <FormItem top='Просмотры'>\r\n                                                    <Input contentEditable={false} value={value.views}/>\r\n                                                </FormItem>\r\n                                                <FormItem top='Лайки'>\r\n                                                    <Input contentEditable={false} value={value.likes}/>\r\n                                                </FormItem>\r\n                                            </FormLayoutGroup>\r\n                                            <FormItem top='Описание'>\r\n                                                <Textarea contentEditable={false} value={value.description}/>\r\n                                            </FormItem>\r\n                                            <Div style={{display: 'flex'}}>\r\n                                                <Button\r\n                                                    stretched mode='editable' size='m'\r\n                                                    onClick={() => {\r\n                                                        this.setState({modalInfo: value, uploadedFile: false});\r\n                                                        this.setActiveModal(MODAL_PAGE_EDIT_STICKER);\r\n                                                    }}\r\n                                                >\r\n                                                    Изменить\r\n                                                </Button>\r\n                                                <Button\r\n                                                    stretched mode='destructive' size='m'\r\n                                                    style={{\r\n                                                        marginLeft: 4\r\n                                                    }}\r\n                                                    onClick={async () => {\r\n                                                        const response = (await get(apiUrl + 'stickers.remove', {\r\n                                                            id: value.id,\r\n                                                            ...getUrlParams()\r\n                                                        })).response;\r\n                                                        if (response) {\r\n                                                            data_site_content.splice(index, 1);\r\n                                                            this.setState({data_site_content});\r\n                                                        } else {\r\n                                                            console.log(response.err);\r\n                                                        }\r\n                                                    }}\r\n                                                >\r\n                                                    Удалить\r\n                                                </Button>\r\n                                            </Div>\r\n                                        </FormLayout>\r\n                                    </Group>\r\n                                )\r\n                            }\r\n                        </Panel>\r\n                    ],\r\n                    modal: <ModalRoot activeModal={modalHistory[modalHistory.length - 1]}>\r\n                        <ModalPage\r\n                            id={MODAL_PAGE_ADD_STICKER}\r\n                            onClose={this.modalBack}\r\n                            header={\r\n                                <ModalPageHeader\r\n                                    right={<PanelHeaderSubmit onClick={async () => {\r\n                                        const sticker = await get(apiUrl + 'stickers.add', {\r\n                                            ...getUrlParams(), image: uploadedFile,\r\n                                            title: this.inputStickerTitleRef.value,\r\n                                            description: this.inputStickerDescriptionRef.value.replaceAll('\\n', '<br/>'),\r\n                                            url: this.inputStickerUrlRef.value,\r\n                                            id_: this.inputStickerIdRef.value\r\n                                        });\r\n                                        this.setState({data_site_content: [...this.state.data_site_content, sticker.response]});\r\n                                        this.modalBack();\r\n                                    }}/>}\r\n                                >\r\n                                    Добавление\r\n                                </ModalPageHeader>\r\n                            }\r\n                        >\r\n                            <Group>\r\n                                <FormLayout>\r\n                                    <FormLayoutGroup mode='horizontal'>\r\n                                        <input\r\n                                            accept='.png'\r\n                                            type='file'\r\n                                            multiple={false}\r\n                                            ref={ref => this.uploadStickerImageRef = ref}\r\n                                            style={{display: 'none'}}\r\n                                            onChange={async event => this.setState({uploadedFile: await this.uploadFile(event)})}\r\n                                        />\r\n                                        <Avatar size={62} src={uploadedFile}\r\n                                                onClick={() => this.uploadStickerImageRef.click()}/>\r\n                                        <FormItem style={{marginLeft: 12}} top='Название'>\r\n                                            <Input getRef={(ref) => this.inputStickerTitleRef = ref}/>\r\n                                        </FormItem>\r\n                                    </FormLayoutGroup>\r\n                                    <FormItem top='Описание'>\r\n                                        <Textarea getRef={(ref) => this.inputStickerDescriptionRef = ref}/>\r\n                                    </FormItem>\r\n                                    <FormLayoutGroup mode='horizontal'>\r\n                                        <FormItem top='Ссылка на переход'>\r\n                                            <Input getRef={(ref) => this.inputStickerUrlRef = ref}/>\r\n                                        </FormItem>\r\n                                        <FormItem top='ID'>\r\n                                            <Input getRef={(ref) => this.inputStickerIdRef = ref}/>\r\n                                        </FormItem>\r\n                                    </FormLayoutGroup>\r\n                                </FormLayout>\r\n                            </Group>\r\n                        </ModalPage>\r\n                        <ModalPage\r\n                            id={MODAL_PAGE_EDIT_STICKER}\r\n                            onClose={this.modalBack}\r\n                            header={\r\n                                <ModalPageHeader\r\n                                    right={<PanelHeaderSubmit onClick={async () => {\r\n                                        const\r\n                                            to_check = [\r\n                                                this.inputStickerTitleRef,\r\n                                                this.inputStickerDescriptionRef,\r\n                                                this.inputStickerUrlRef,\r\n                                                this.inputStickerIdRef\r\n                                            ],\r\n                                            edited_keys = {}\r\n                                        ;\r\n\r\n                                        for (const element of to_check) {\r\n                                            const {key} = element.dataset;\r\n                                            if (element.value !== modalInfo[key]) {\r\n                                                edited_keys[key] = element.value === '' ? undefined : element.value;\r\n                                            }\r\n                                        }\r\n\r\n                                        if (uploadedFile) {\r\n                                            edited_keys.image = uploadedFile;\r\n                                        }\r\n\r\n                                        if (Object.keys(edited_keys).length > 0) {\r\n                                            const response = (await get(apiUrl + 'stickers.edit', {\r\n                                                ...getUrlParams(), ...edited_keys,\r\n                                                id: modalInfo.id\r\n                                            })).response;\r\n                                            if (response) {\r\n                                                const {data_site_content} = this.state;\r\n                                                data_site_content[data_site_content.findIndex(value => value.id === response.id)] = response;\r\n                                                await this.setState({data_site_content});\r\n                                            }\r\n                                        }\r\n                                        this.modalBack();\r\n                                    }}/>}\r\n                                >\r\n                                    Редактирование\r\n                                </ModalPageHeader>\r\n                            }\r\n                        >\r\n                            <Group>\r\n                                <FormLayout>\r\n                                    <FormLayoutGroup mode='horizontal'>\r\n                                        <input\r\n                                            accept='.png'\r\n                                            type='file'\r\n                                            multiple={false}\r\n                                            ref={ref => this.uploadStickerImageRef = ref}\r\n                                            style={{display: 'none'}}\r\n                                            onChange={async event => this.setState({uploadedFile: await this.uploadFile(event)})}\r\n                                        />\r\n                                        <Avatar size={62} src={uploadedFile || modalInfo.image}\r\n                                                onClick={() => this.uploadStickerImageRef.click()}/>\r\n                                        <FormItem style={{marginLeft: 12}} top='Название'>\r\n                                            <Input\r\n                                                data-key='title'\r\n                                                getRef={(ref) => this.inputStickerTitleRef = ref}\r\n                                                defaultValue={modalInfo.title}\r\n                                            />\r\n                                        </FormItem>\r\n                                    </FormLayoutGroup>\r\n                                    <FormItem top='Описание'>\r\n                                        <Textarea data-key='description'\r\n                                                  getRef={(ref) => this.inputStickerDescriptionRef = ref}\r\n                                                  defaultValue={modalInfo.description}\r\n                                        />\r\n                                    </FormItem>\r\n                                    <FormLayoutGroup mode='horizontal'>\r\n                                        <FormItem top='Ссылка на переход'>\r\n                                            <Input data-key='url' getRef={(ref) => this.inputStickerUrlRef = ref}\r\n                                                   defaultValue={modalInfo.url}/>\r\n                                        </FormItem>\r\n                                        <FormItem top='ID'>\r\n                                            <Input data-key='id_' getRef={(ref) => this.inputStickerIdRef = ref}\r\n                                                   defaultValue={modalInfo.id_}/>\r\n                                        </FormItem>\r\n                                    </FormLayoutGroup>\r\n                                </FormLayout>\r\n                            </Group>\r\n                        </ModalPage>\r\n                    </ModalRoot>,\r\n                    method: 'stickers.get'\r\n                }\r\n            ]\r\n        ;\r\n\r\n        const Application = withAdaptivity(({viewWidth}) => {\r\n            const\r\n                isDesktop = viewWidth >= ViewWidth.SMALL_TABLET,\r\n                styleForSelectedCell = {\r\n                    backgroundColor: 'var(--button_secondary_background)',\r\n                    borderRadius: 8\r\n                }\r\n            ;\r\n\r\n            return (\r\n                <SplitLayout\r\n                    style={{justifyContent: 'center'}}\r\n                >\r\n                    {isDesktop && (\r\n                        <SplitCol fixed width='280px' maxWidth='280px'>\r\n                            <Panel>\r\n                                <Group>\r\n                                    {\r\n                                        tabs.map(((value, index) =>\r\n                                                <Cell\r\n                                                    key={`Cell_${index}`}\r\n                                                    disabled={activeStory === value.id}\r\n                                                    style={{marginTop: index > 0 && 4, ...activeStory === value.id ? styleForSelectedCell : {}}}\r\n                                                    data-story={value.id}\r\n                                                    onClick={async (e) => {\r\n                                                        this.onStoryChange(e);\r\n                                                        if (value.method)\r\n                                                            await this.setState({\r\n                                                                popout: <ScreenSpinner/>,\r\n                                                                [`data_${value.id}`]: (await get(apiUrl + value.method, getUrlParams())).response\r\n                                                            });\r\n\r\n                                                        this.setState({popout: null});\r\n                                                    }}\r\n                                                    before={value.icon}\r\n                                                >\r\n                                                    {value.caption}\r\n                                                </Cell>\r\n                                        ))\r\n                                    }\r\n                                </Group>\r\n                            </Panel>\r\n                        </SplitCol>\r\n                    )}\r\n                    <SplitCol\r\n                        animate={!isDesktop}\r\n                        spaced={isDesktop}\r\n                        width={isDesktop ? '680px' : '100%'}\r\n                        maxWidth={isDesktop ? '680px' : '100%'}\r\n                    >\r\n                        <Epic activeStory={activeStory} tabbar={!isDesktop &&\r\n                        <Tabbar>\r\n                            {\r\n                                tabs.map(((value, index) =>\r\n                                        <TabbarItem\r\n                                            key={`Cell_${index}`}\r\n                                            onClick={this.onStoryChange}\r\n                                            selected={activeStory === value.id}\r\n                                            data-story={value.id}\r\n                                            text={value.caption}\r\n                                        >{value.icon}</TabbarItem>\r\n                                ))\r\n                            }\r\n                        </Tabbar>\r\n                        }>\r\n                            {\r\n                                tabs.map(((value, index) =>\r\n                                        <View\r\n                                            key={`View_${index}`} id={value.id}\r\n                                            activePanel={storyHistory[value.id][storyHistory[value.id].length - 1]}\r\n                                            modal={value.modal}\r\n                                        >\r\n                                            {value.panels}\r\n                                        </View>\r\n                                ))\r\n                            }\r\n                        </Epic>\r\n                    </SplitCol>\r\n                </SplitLayout>\r\n            );\r\n        }, {\r\n            viewWidth: true\r\n        });\r\n\r\n        return (\r\n            <Application/>\r\n        );\r\n    }\r\n}\r\n\r\nexport default AdvertisementApp;","import 'core-js/features/map';\nimport 'core-js/features/set';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport '@vkontakte/vkui/dist/unstable.css'\nimport {AdaptivityProvider, AppRoot, ConfigProvider} from \"@vkontakte/vkui\";\n\nimport './css/Fonts.css';\nimport './css/Error.css';\nimport './css/Utils.css';\n\n//import App from './apps/Tracker';\n//import App from './apps/Wheel';\n//import App from './apps/MedicalCard';\n//import App from './apps/AskMe';\n//import App from './apps/LoveAnalysis';\n//import App from './apps/BattleStat';\n//import App from './apps/BattleStatCatalog';\n//import App from './apps/YearTest';\n//import App from './apps/IQTest';\n//import App from './apps/MvsW';\n//import App from './apps/DeathDate';\n//import App from './apps/Slaves';\n//import App from './apps/VKTime';\n//import App from './apps/LikesStat';\n//import App from './apps/VKAccPrice';\n//import App from './apps/DateCelebrity';\n//import App from './apps/NameInCountry';\n//import App from './apps/AccKarma';\nimport App from './apps/AdvertisementApp';\n//import App from './apps/AdvertisementAppSite';\n//import App from './apps/ClickerBattle/ClickerBattle';\n\n\nReactDOM.render(\n    false ?\n        <App/>\n        :\n        <ConfigProvider>\n            <AdaptivityProvider>\n                <AppRoot>\n                    <App/>\n                </AppRoot>\n            </AdaptivityProvider>\n        </ConfigProvider>, document.getElementById('root')\n);\n"],"sourceRoot":""}